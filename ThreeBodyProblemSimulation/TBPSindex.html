<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Three-Body Problem Simulation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f0f0f0;
        }

        canvas {
            border: 1px solid #000;
            background-color: #fff;
        }
    </style>
</head>
<body>
    <h1>Three-Body Problem Simulation</h1>
    <canvas id="simulationCanvas" width="1920" height="1080"></canvas>

    <script>
        const canvas = document.getElementById('simulationCanvas');
        const ctx = canvas.getContext('2d');

class Body {
    constructor(x, y, mass, vx, vy, color) {
        class Body {
            constructor(x, y, mass, vx, vy) {
                this.x = x;
                this.y = y;
                this.mass = mass;
                this.vx = vx;
                this.vy = vy;
            }
        this.color = color;
    }

    draw() {
        ctx.fillStyle = this.color;
        ctx.beginPath();
        ctx.arc(this.x, this.y, Math.sqrt(this.mass) * 0.1, 0, 2 * Math.PI);
        ctx.fill();
    }
}

const bodies = [
    new Body(200, 300, 1e10, 0, 5, 'red'),
    new Body(400, 300, 1e10, 0, -5, 'blue'),
    new Body(300, 500, 1e10, 5, 0, 'green')
];


            update(bodies, dt) {
                let fx = 0, fy = 0;
                for (let body of bodies) {
                    if (body !== this) {
                        let dx = body.x - this.x;
                        let dy = body.y - this.y;
                        let distSq = dx * dx + dy * dy;
                        let f = (6.67430e-3 * this.mass * body.mass) / distSq;
                        let dist = Math.sqrt(distSq);
                        fx += f * dx / dist;
                        fy += f * dy / dist;
                    }
                }
                this.vx += fx / this.mass * dt;
                this.vy += fy / this.mass * dt;
                this.x += this.vx * dt;
                this.y += this.vy * dt;
            }

            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, Math.sqrt(this.mass) * 0.001, 0, 2 * Math.PI);
                ctx.fill();
            }
        }

        const bodies = [
            new Body(400, 300, 1e10, 0, 0),
            new Body(400, 400, 1e10, 1, 0),
            new Body(500, 300, 1e10, 0, -1)
        ];

        function simulate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            for (let body of bodies) {
                body.update(bodies, 0.001);
                body.draw();
            }
            requestAnimationFrame(simulate);
        }

        simulate();
    </script>
</body>
</html>
