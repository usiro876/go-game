<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Three-Body Problem Simulation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f0f0f0;
        }
        canvas {
            border: 1px solid #000;
            background-color: #000;
        }
    </style>
</head>
<body>
    <h1>Three-Body Problem Simulation</h1>
    <canvas id="simulationCanvas"></canvas>
    <script>
        const canvas = document.getElementById('simulationCanvas');
        const ctx = canvas.getContext('2d');

        canvas.width = 800;
        canvas.height = 600;

        const G = 6.67430e-11;
        const SCALE = 1e-8;
        const DT = 1000;

        class Body {
            constructor(x, y, mass, vx, vy, color) {
                this.x = x;
                this.y = y;
                this.mass = mass;
                this.vx = vx;
                this.vy = vy;
                this.color = color;
            }

            update(bodies, dt) {
                let fx = 0, fy = 0;
                for (let body of bodies) {
                    if (body !== this) {
                        let dx = body.x - this.x;
                        let dy = body.y - this.y;
                        let distSq = dx * dx + dy * dy;
                        let f = (G * this.mass * body.mass) / distSq;
                        let dist = Math.sqrt(distSq);
                        fx += f * dx / dist;
                        fy += f * dy / dist;
                    }
                }
                this.vx += fx / this.mass * dt;
                this.vy += fy / this.mass * dt;
                this.x += this.vx * dt;
                this.y += this.vy * dt;
            }

            draw() {
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x * SCALE + canvas.width / 2, this.y * SCALE + canvas.height / 2, Math.sqrt(this.mass) * 1e-6, 0, 2 * Math.PI);
                ctx.fill();
            }
        }

        const bodies = [
            new Body(0, 0, 1e30, 0, 0, '#FF0000'),
            new Body(1e11, 0, 1e30, 0, 1e4, '#00FF00'),
            new Body(-1e11, 0, 1e30, 0, -1e4, '#0000FF')
        ];

        function simulate() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            for (let body of bodies) {
                body.update(bodies, DT);
                body.draw();
            }
            requestAnimationFrame(simulate);
        }

        simulate();
    </script>
</body>
</html>
